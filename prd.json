{
  "projectName": "Phraser",
  "branchName": "feature/phraser-mvp",
  "tddRequirements": {
    "enabled": true,
    "testRunner": "vitest",
    "runtime": "bun",
    "coverageThreshold": 80,
    "description": "ALL features MUST be developed using Test-Driven Development (TDD). Write tests BEFORE implementing functionality. No code should be committed without passing tests."
  },
  "userStories": [
    {
      "id": "US-0.1",
      "title": "Testing Infrastructure Setup",
      "passes": false,
      "priority": 1,
      "acceptanceCriteria": [
        "Install Bun as runtime",
        "Install and configure Vitest",
        "Configure test environment for Next.js",
        "Set up test coverage reporting",
        "Create test database fixture",
        "Add test scripts to package.json (test, test:watch, test:coverage)",
        "All existing code must have tests added retroactively"
      ]
    },
    {
      "id": "US-1.1",
      "title": "Quick Translation Input",
      "passes": true,
      "priority": 1,
      "acceptanceCriteria": [
        "Primary input field on homepage",
        "Support for paste action",
        "Source language selector (dropdown)",
        "Target language selector (dropdown)",
        "Submit button to trigger translation",
        "Loading state while fetching from DeepSeek API",
        "Display translated phrase prominently",
        "TESTS: Unit tests for TranslationInput component (user interactions, state changes)",
        "TESTS: API route tests for /api/translate (mock DeepSeek API)",
        "TESTS: Error handling tests (API failures, empty input)",
        "TESTS: Integration tests for full translation flow"
      ]
    },
    {
      "id": "US-1.2",
      "title": "Translation History",
      "passes": false,
      "priority": 3,
      "acceptanceCriteria": [
        "Display last 5 translations in session",
        "Each entry shows: source phrase, translation, language pair, timestamp",
        "Click to copy translation to clipboard",
        "TESTS: Unit tests for history state management",
        "TESTS: Clipboard API tests (mock navigator.clipboard)",
        "TESTS: Component rendering tests for history list"
      ]
    },
    {
      "id": "US-2.1",
      "title": "Save Phrase to Database",
      "passes": false,
      "priority": 1,
      "acceptanceCriteria": [
        "Save button appears after translation is displayed",
        "On save: store source phrase, translation, source language, target language, timestamp",
        "Success confirmation (toast notification)",
        "Prevent duplicate saves of same phrase+language pair",
        "Auto-tag with language pair category",
        "TESTS: Database operation tests (insert, select, update)",
        "TESTS: Duplicate detection tests",
        "TESTS: API endpoint tests for saving phrases",
        "TESTS: Toast notification tests"
      ]
    },
    {
      "id": "US-2.2",
      "title": "Browse Saved Phrases",
      "passes": false,
      "priority": 2,
      "acceptanceCriteria": [
        "Paginated list view of saved phrases",
        "Each entry shows: source phrase, translation, language pair, save date",
        "Edit button for each phrase",
        "Delete button for each phrase",
        "Empty state when no phrases saved",
        "TESTS: Pagination logic tests",
        "TESTS: Database query tests (with pagination)",
        "TESTS: Component tests for phrase list",
        "TESTS: Edit/delete functionality tests",
        "TESTS: Empty state rendering tests"
      ]
    },
    {
      "id": "US-2.3",
      "title": "Search & Filter Phrases",
      "passes": false,
      "priority": 2,
      "acceptanceCriteria": [
        "Search bar filters by source phrase OR translation",
        "Filter by language pair (dropdown)",
        "Filter by tags (multi-select)",
        "Real-time filtering as user types/selects",
        "TESTS: Search algorithm tests (case-insensitive, partial matches)",
        "TESTS: Filter logic tests (language, tags, combined)",
        "TESTS: Performance tests for large datasets",
        "TESTS: Debouncing tests for real-time search"
      ]
    },
    {
      "id": "US-2.4",
      "title": "Manage Tags",
      "passes": false,
      "priority": 3,
      "acceptanceCriteria": [
        "Add tags when saving a phrase (optional)",
        "Add/edit tags on saved phrases",
        "Tag input supports autocomplete from existing tags",
        "Remove tags from phrases",
        "View all tags used across all phrases",
        "TESTS: Tag CRUD operation tests",
        "TESTS: Autocomplete functionality tests",
        "TESTS: Many-to-many relationship tests",
        "TESTS: Tag suggestion algorithm tests"
      ]
    },
    {
      "id": "US-3.1",
      "title": "Flashcard Review Mode",
      "passes": false,
      "priority": 1,
      "acceptanceCriteria": [
        "Start Review button on main navigation",
        "Flashcard displays source phrase OR translation (randomized)",
        "Flip animation to reveal answer",
        "Self-rating buttons: Again, Hard, Good, Easy",
        "Show next card after rating",
        "Progress indicator (cards reviewed / total cards)",
        "TESTS: Card randomization tests",
        "TESTS: Flip animation state tests",
        "TESTS: Rating button handler tests",
        "TESTS: Progress calculation tests",
        "TESTS: Navigation flow tests"
      ]
    },
    {
      "id": "US-3.2",
      "title": "Simple Spaced Repetition (SRS)",
      "passes": false,
      "priority": 2,
      "acceptanceCriteria": [
        "Store SRS data for each phrase: ease factor, interval, next review date",
        "Calculate next review date based on user rating (Simplified SM-2 algorithm)",
        "Only show cards due for review (next_review_date <= now)",
        "If no cards due, show message All cards reviewed for today!",
        "TESTS: SM-2 algorithm calculation tests (ease_factor, interval)",
        "TESTS: Next review date calculation tests",
        "TESTS: Due cards query tests",
        "TESTS: Edge case tests (all cards reviewed, no cards, etc.)"
      ]
    },
    {
      "id": "US-3.3",
      "title": "Review Statistics",
      "passes": false,
      "priority": 4,
      "acceptanceCriteria": [
        "Dashboard showing: total cards, cards due today, cards reviewed today",
        "Streak counter (consecutive days of review)",
        "Last review date",
        "TESTS: Statistics calculation tests",
        "TESTS: Streak algorithm tests",
        "TESTS: Date comparison tests",
        "TESTS: Dashboard component tests"
      ]
    },
    {
      "id": "US-4.1",
      "title": "Export to Anki Format",
      "passes": false,
      "priority": 3,
      "acceptanceCriteria": [
        "Export button in phrase management view",
        "Generate Anki-compatible CSV/UTF-8 file",
        "Format: source phrase, translation, tags",
        "File includes all fields needed for Anki import",
        "Download dialog triggers automatically",
        "TESTS: CSV generation tests",
        "TESTS: UTF-8 encoding tests",
        "TESTS: Tag formatting tests for Anki",
        "TESTS: File download trigger tests"
      ]
    },
    {
      "id": "US-5.1",
      "title": "SQLite Database Setup",
      "passes": true,
      "priority": 1,
      "acceptanceCriteria": [
        "Initialize SQLite database with Drizzle ORM",
        "Create tables: phrases, tags, phrase_tags, srs_data",
        "Database file: phraser.db in project root",
        "Run migrations on app startup",
        "TESTS: Schema validation tests",
        "TESTS: Migration tests (up/down)",
        "TESTS: Foreign key constraint tests",
        "TESTS: Database connection tests",
        "TESTS: Transaction rollback tests"
      ]
    },
    {
      "id": "US-5.2",
      "title": "Language Pair Configuration",
      "passes": true,
      "priority": 2,
      "acceptanceCriteria": [
        "Configuration object with common languages (English, Spanish, French, German, Italian, Portuguese, Chinese, Japanese, Korean)",
        "Language selector dropdowns use this config",
        "Support for bidirectional translation (any pair)",
        "Store language pair with each saved phrase",
        "TESTS: Language configuration tests",
        "TESTS: Language code validation tests",
        "TESTS: Bidirectional translation tests",
        "TESTS: Language name lookup tests"
      ]
    }
  ]
}
